import{a as ee,d as te,e as re,f as ne,g as ce}from"./chunk-NX4GBXD5.js";import{a as ie,b as se}from"./chunk-WVPLSDAB.js";import{a as ae}from"./chunk-5XHTMESU.js";import{a as oe}from"./chunk-5EPWRUUJ.js";import{$a as Z,Ba as S,Da as _,Ea as J,Fa as L,Ga as N,K as z,La as E,Na as Q,Oa as X,Pa as P,R as F,W as H,Za as Y,a as u,ab as U,ba as W,c as ve,ca as l,da as y,ha as M,ia as d,ka as b,la as I,ma as v,n as K,na as O,oa as f,pa as m,qa as g,tb as w,ua as G,va as C,xa as p,ya as x,za as A}from"./chunk-2WJLTE3U.js";var le=(()=>{let t=class t{range(n,i){return[...Array(i-n).keys()].map(a=>a+n)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ae=e=>({"active-pg":e}),Ee=e=>({page:e});function Pe(e,t){if(e&1&&(f(0,"li",2)(1,"a",3),p(2),m()()),e&2){let r=t.$implicit,n=C();d("ngClass",_(4,Ae,n.currentPage===r)),l(),d("routerLink",n.url)("queryParams",_(6,Ee,r)),l(),x(r)}}var fe=(()=>{let t=class t{constructor(n){this.utilsService=n,this.total=0,this.limit=0,this.url="",this.currentPage=0,this.pageCount=1,this.pages=[]}ngOnInit(){this.pageCount=Math.ceil(this.total/this.limit),this.pages=this.pageCount>0?this.utilsService.range(1,this.pageCount):[]}};t.\u0275fac=function(i){return new(i||t)(y(le))},t.\u0275cmp=F({type:t,selectors:[["app-pagination"]],inputs:{total:"total",limit:"limit",url:"url",currentPage:"currentPage"},standalone:!0,features:[S],decls:4,vars:0,consts:[["aria-label","..."],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"routerLink","queryParams"]],template:function(i,a){i&1&&(f(0,"nav",0)(1,"ul",1),v(2,Pe,3,8,"li",2,I),m()()),i&2&&(l(2),O(a.pages))},dependencies:[E,U],styles:[".active-pg[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#fff;background-color:#8e3d8f}"]});let e=t;return e})();var B={};ve(B,{exclude:()=>$e,extract:()=>R,parse:()=>q,parseUrl:()=>xe,pick:()=>_e,stringify:()=>Ce,stringifyUrl:()=>Se});var ue="%[a-f0-9]{2}",de=new RegExp("("+ue+")|([^%]+?)","gi"),me=new RegExp("("+ue+")+","gi");function $(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;let r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],$(r),$(n))}function Ue(e){try{return decodeURIComponent(e)}catch{let t=e.match(de)||[];for(let r=1;r<t.length;r++)e=$(t,r).join(""),t=e.match(de)||[];return e}}function we(e){let t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=me.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{let i=Ue(r[0]);i!==r[0]&&(t[r[0]]=i)}r=me.exec(e)}t["%C2"]="\uFFFD";let n=Object.keys(t);for(let i of n)e=e.replace(new RegExp(i,"g"),t[i]);return e}function k(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return we(e)}}function j(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];let r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}function pe(e,t){let r={};if(Array.isArray(t))for(let n of t){let i=Object.getOwnPropertyDescriptor(e,n);i?.enumerable&&Object.defineProperty(r,n,i)}else for(let n of Reflect.ownKeys(e)){let i=Object.getOwnPropertyDescriptor(e,n);if(i.enumerable){let a=e[n];t(n,a,e)&&Object.defineProperty(r,n,i)}}return r}var je=e=>e==null,Me=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),D=Symbol("encodeFragmentIdentifier");function Le(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let i=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[c(t,e),"[",i,"]"].join("")]:[...r,[c(t,e),"[",c(i,e),"]=",c(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[c(t,e),"[]"].join("")]:[...r,[c(t,e),"[]=",c(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[c(t,e),":list="].join("")]:[...r,[c(t,e),":list=",c(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||e.skipNull&&i===null||e.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[c(r,e),t,c(i,e)].join("")]:[[n,c(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,c(t,e)]:[...r,[c(t,e),"=",c(n,e)].join("")]}}function Ne(e){let t;switch(e.arrayFormat){case"index":return(r,n,i)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][t[1]]=n};case"bracket":return(r,n,i)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"colon-list-separator":return(r,n,i)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"comma":case"separator":return(r,n,i)=>{let a=typeof n=="string"&&n.includes(e.arrayFormatSeparator),o=typeof n=="string"&&!a&&h(n,e).includes(e.arrayFormatSeparator);n=o?h(n,e):n;let s=a||o?n.split(e.arrayFormatSeparator).map(Ie=>h(Ie,e)):n===null?n:h(n,e);i[r]=s};case"bracket-separator":return(r,n,i)=>{let a=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!a){i[r]=n&&h(n,e);return}let o=n===null?[]:n.split(e.arrayFormatSeparator).map(s=>h(s,e));if(i[r]===void 0){i[r]=o;return}i[r]=[...i[r],...o]};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[...[i[r]].flat(),n]}}}function he(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?Me(e):encodeURIComponent(e):e}function h(e,t){return t.decode?k(e):e}function ye(e){return Array.isArray(e)?e.sort():typeof e=="object"?ye(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function Fe(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function Te(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function ge(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function R(e){e=Fe(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function q(e,t){t=u({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),he(t.arrayFormatSeparator);let r=Ne(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let i of e.split("&")){if(i==="")continue;let a=t.decode?i.replaceAll("+"," "):i,[o,s]=j(a,"=");o===void 0&&(o=a),s=s===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:h(s,t),r(h(o,t),s,n)}for(let[i,a]of Object.entries(n))if(typeof a=="object"&&a!==null)for(let[o,s]of Object.entries(a))a[o]=ge(s,t);else n[i]=ge(a,t);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((i,a)=>{let o=n[a];return i[a]=o&&typeof o=="object"&&!Array.isArray(o)?ye(o):o,i},Object.create(null))}function Ce(e,t){if(!e)return"";t=u({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),he(t.arrayFormatSeparator);let r=o=>t.skipNull&&je(e[o])||t.skipEmptyString&&e[o]==="",n=Le(t),i={};for(let[o,s]of Object.entries(e))r(o)||(i[o]=s);let a=Object.keys(i);return t.sort!==!1&&a.sort(t.sort),a.map(o=>{let s=e[o];return s===void 0?"":s===null?c(o,t):Array.isArray(s)?s.length===0&&t.arrayFormat==="bracket-separator"?c(o,t)+"[]":s.reduce(n(o),[]).join("&"):c(o,t)+"="+c(s,t)}).filter(o=>o.length>0).join("&")}function xe(e,t){t=u({decode:!0},t);let[r,n]=j(e,"#");return r===void 0&&(r=e),u({url:r?.split("?")?.[0]??"",query:q(R(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:h(n,t)}:{})}function Se(e,t){t=u({encode:!0,strict:!0,[D]:!0},t);let r=Fe(e.url).split("?")[0]||"",n=R(e.url),i=u(u({},q(n,{sort:!1})),e.query),a=Ce(i,t);a&&=`?${a}`;let o=Te(e.url);if(typeof e.fragmentIdentifier=="string"){let s=new URL(r);s.hash=e.fragmentIdentifier,o=t[D]?s.hash:`#${e.fragmentIdentifier}`}return`${r}${a}${o}`}function _e(e,t,r){r=u({parseFragmentIdentifier:!0,[D]:!1},r);let{url:n,query:i,fragmentIdentifier:a}=xe(e,r);return Se({url:n,query:pe(i,t),fragmentIdentifier:a},r)}function $e(e,t,r){let n=Array.isArray(t)?i=>!t.includes(i):(i,a)=>!t(i,a);return _e(e,n,r)}var V=B;var Re=(e,t)=>({" btn-primary":e," btn-outline-primary":t}),be=(()=>{let t=class t{constructor(n){this.store=n,this.favoritesCount=0,this.articleSlug="",this.isFavorites=!1}handleLike(){this.isFavorites?this.favoritesCount=this.favoritesCount-1:this.favoritesCount=this.favoritesCount+1,this.isFavorites=!this.isFavorites,this.store.dispatch(ce.addToFavorites({isFavrited:this.isFavorites,slug:this.articleSlug}))}};t.\u0275fac=function(i){return new(i||t)(y(w))},t.\u0275cmp=F({type:t,selectors:[["app-add-to-favorites"]],inputs:{favoritesCount:"favoritesCount",articleSlug:"articleSlug",isFavorites:"isFavorites"},standalone:!0,features:[S],decls:3,vars:5,consts:[[1,"btn","btn-sm","float-end",3,"click","ngClass"],[1,"bi","bi-heart-fill"]],template:function(i,a){i&1&&(f(0,"button",0),G("click",function(){return a.handleLike()}),g(1,"i",1),p(2),m()),i&2&&(d("ngClass",J(2,Re,a.isFavorites,!a.isFavorites)),l(2),A(" ",a.favoritesCount,`
`))},dependencies:[P,E],encapsulation:2});let e=t;return e})();var qe=e=>["/profiles",e],Be=e=>["/article",e];function Ve(e,t){e&1&&g(0,"app-loading")}function Ke(e,t){if(e&1&&g(0,"app-error-message",1),e&2){let r=C();d("errorMsg",r.error)}}function ze(e,t){if(e&1&&(f(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",3)(5,"div",6)(6,"h5",7),g(7,"img",8),f(8,"div",9)(9,"a",10),p(10),m(),f(11,"small",11),p(12),L(13,"date"),m()()()(),f(14,"div",12),g(15,"app-add-to-favorites",13),m()(),f(16,"a",14)(17,"h4",15),p(18),m(),f(19,"p",16),p(20),m(),f(21,"div",3)(22,"div",17)(23,"p",16),p(24,"Read more..."),m()(),f(25,"div",18),g(26,"app-tag-list",19),m()()()()()()()),e&2){let r=t.$implicit;l(7),d("src",r.author.image,W)("alt",r.author.username),l(2),d("routerLink",_(14,qe,r.author.username)),l(),A("",r.author.username," "),l(2),x(N(13,12,r.createdAt)),l(3),d("isFavorites",r.favorited)("articleSlug",r.slug)("favoritesCount",r.favoritesCount),l(),d("routerLink",_(16,Be,r.slug)),l(2),x(r.title),l(2),x(r.description),l(6),d("tags",r.tagList)}}function He(e,t){if(e&1&&(v(0,ze,27,18,"div",2,I),g(2,"app-pagination",0)),e&2){let r=C(),n=C();O(r==null||r.feed==null?null:r.feed.articles),l(2),d("total",r.feed.articlesCount)("limit",n.limit)("url",n.baseUrl)("currentPage",n.currentPage)}}function We(e,t){if(e&1&&M(0,Ve,1,0,"app-loading")(1,Ke,1,1)(2,He,3,4,"app-pagination",0),e&2){let r=t;b(0,r.isLoading?0:r.error?1:-1),l(2),b(2,r.feed?2:-1)}}var bt=(()=>{let t=class t{ngOnChanges(n){!n.apiUrl.firstChange&&n.apiUrl.currentValue!==n.apiUrl.previousValue&&this.fectFeed()}constructor(n,i,a){this.store=n,this.router=i,this.route=a,this.apiUrl="",this.data$=K({isLoading:this.store.select(te),feed:this.store.select(re),error:this.store.select(ne)}),this.limit=oe.limit,this.baseUrl=this.router.url.split("?")[0],this.currentPage=0}ngOnInit(){this.route.queryParams.subscribe(n=>{this.currentPage=Number(n.page||"1"),this.fectFeed()})}fectFeed(){let n=this.currentPage*this.limit-this.limit,i=V.parseUrl(this.apiUrl),a=V.stringify(u({limit:this.limit,offset:n},i.query)),o=`${i.url}?${a}`;this.store.dispatch(ee.getFeed({url:o}))}};t.\u0275fac=function(i){return new(i||t)(y(w),y(Z),y(Y))},t.\u0275cmp=F({type:t,selectors:[["app-feed"]],inputs:{apiUrl:"apiUrl"},standalone:!0,features:[H,S],decls:2,vars:3,consts:[[3,"total","limit","url","currentPage"],[3,"errorMsg"],[1,"card","mb-3"],[1,"row"],[1,"col-md-12"],[1,"card-body"],[1,"col-md-10","col-sm-8","col-8"],[1,"card-title","d-flex","gap-2","align-items-center"],[1,"img-fluid",3,"src","alt"],[1,"d-flex","flex-column"],[1,"username",3,"routerLink"],[1,"text-muted"],[1,"col-md-2","col-sm-4","col-4"],[3,"isFavorites","articleSlug","favoritesCount"],[3,"routerLink"],[1,"card-title"],[1,"card-text"],[1,"col-sm-4","col-12"],[1,"col-sm-8","col-12"],[1,"d-flex","justify-content-end",3,"tags"]],template:function(i,a){if(i&1&&(M(0,We,3,2),L(1,"async")),i&2){let o;b(0,(o=N(1,1,a.data$))?0:-1,o)}},dependencies:[P,Q,X,ie,U,ae,fe,se,be],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000}.username[_ngcontent-%COMP%]{color:#1e4ee9}.text-muted[_ngcontent-%COMP%]{font-size:.85rem}img[_ngcontent-%COMP%]{border-radius:50%}.img-fluid[_ngcontent-%COMP%]{width:32px;height:32px}"]});let e=t;return e})();export{bt as a};
