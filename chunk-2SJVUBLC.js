import{a as c,f as $}from"./chunk-ZBNX2IFH.js";import{a as R,c as M,d as A,e as B,f as D,g as T,h as G,i as O}from"./chunk-6YVOLU4S.js";import{a as q}from"./chunk-UUCJONHT.js";import{b as P}from"./chunk-4QKSUY3S.js";import"./chunk-OYZRTRNL.js";import{Ab as K,Ba as w,Fa as k,Ga as I,Na as N,Pa as V,R as F,X as g,Y as h,a as m,b as f,ca as u,da as S,ha as C,ia as b,ka as v,n as E,oa as o,pa as i,qa as l,r as y,ta as U,tb as z,ua as x,ub as L,va as d,wb as j,xa as s,xb as H,zb as p}from"./chunk-2WJLTE3U.js";var J={isSubmitting:!1,validationErrors:null},te=j({name:"settings",reducer:K(J,p(c.updateCureentUser,e=>f(m({},e),{isSubmitting:!0})),p(c.updateCureentUserSuccess,e=>f(m({},e),{isSubmitting:!1})),p(c.updateCureentUserFailure,(e,r)=>f(m({},e),{isSubmitting:!1,validationErrors:r.errors})),p(P,()=>J))}),{name:Q,reducer:W,selectIsSubmitting:X,selectValidationErrors:Y}=te;function ie(e,r){if(e&1&&l(0,"app-backend-error-messages",4),e&2){let a=d();b("backendErrors",a.bakendErrors)}}function re(e,r){if(e&1){let a=U();o(0,"div",1)(1,"div",2)(2,"div",3),C(3,ie,1,1,"app-backend-error-messages",4),o(4,"form",5),x("ngSubmit",function(){g(a);let n=d();return h(n.onSubmit())}),o(5,"div",6)(6,"label",7),s(7,"Image Url"),i(),l(8,"input",8),i(),o(9,"div",6)(10,"label",9),s(11,"Username"),i(),l(12,"input",10),o(13,"small",11),s(14,"Help text"),i()(),o(15,"div",6)(16,"label",12),s(17,"Email"),i(),l(18,"input",13),i(),o(19,"div",6)(20,"label",14),s(21,"Bio"),i(),l(22,"textarea",15),i(),o(23,"div",6)(24,"button",16),s(25," Submit "),i()()(),l(26,"hr",17),o(27,"button",18),x("click",function(){g(a);let n=d();return h(n.Logout())}),s(28," Or click here to logout "),i()()()()}if(e&2){let a=r,t=d();u(3),v(3,a.bakendErrors?3:-1),u(),b("formGroup",t.form),u(20),b("disabled",t.form.invalid||a.isSubmitting)}}var Z=(()=>{let r=class r{constructor(t,n){this.fb=t,this.store=n,this.form=this.fb.nonNullable.group({image:"",username:"",bio:"",email:"",password:""}),this.data$=E({isSubmitting:this.store.select(X),bakendErrors:this.store.select(Y)})}ngOnInit(){this.currentUserSubscription=this.store.pipe(L($),y(Boolean)).subscribe(t=>{this.currentUser=t,this.initializeForm()})}initializeForm(){if(!this.initializeForm)throw new Error("current user is not set");this.form.patchValue({image:this.currentUser?.image??"",username:this.currentUser?.username,bio:this.currentUser?.bio??"",email:this.currentUser?.email,password:""})}onSubmit(){if(!this.currentUser)throw new Error("current user is not set");let t={user:m(m({},this.currentUser),this.form.getRawValue())};this.store.dispatch(c.updateCureentUser({currentUserRequest:t}))}Logout(){this.store.dispatch(c.logout())}ngOnDestroy(){this.currentUserSubscription?.unsubscribe()}};r.\u0275fac=function(n){return new(n||r)(S(G),S(z))},r.\u0275cmp=F({type:r,selectors:[["app-settings"]],standalone:!0,features:[w],decls:6,vars:3,consts:[[1,"banner"],[1,"container"],[1,"row","mt-5"],[1,"col-md-10"],[3,"backendErrors"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","imageFormControlInput1",1,"form-label"],["type","text","id","imageFormControlInput1","placeholder","image","formControlName","image",1,"form-control"],["for","username",1,"form-label"],["type","text","name","username","id","username","formControlName","username","placeholder","Username",1,"form-control"],["id","helpId",1,"form-text","text-muted"],["for","",1,"form-label"],["type","email","name","email","id","email","formControlName","email","aria-describedby","emailHelpId","placeholder","abc@mail.com",1,"form-control"],["for","bioFormContrilInput2",1,"form-label"],["id","bioFormContrilInput2","rows","2","formControlName","bio",1,"form-control"],["type","submit","data-bs-toggle","submit",1,"btn","btn-primary",3,"disabled"],[1,"my-3"],["type","submit","data-bs-toggle","button",1,"btn","btn-outline-danger",3,"click"]],template:function(n,ee){if(n&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Settings"),i()()(),C(4,re,29,3,"div",1),k(5,"async")),n&2){let _;u(4),v(4,(_=I(5,1,ee.data$))?4:-1,_)}},dependencies:[q,V,N,O,B,R,M,A,D,T],styles:[".banner[_ngcontent-%COMP%]{color:#fff;background-color:#5cb85c;padding:2rem;margin-bottom:2rem}"]});let e=r;return e})();var Ue=[{path:"",component:Z,providers:[H(Q,W)]}];export{Ue as settingsRoutes};
