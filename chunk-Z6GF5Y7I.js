import{a as fe}from"./chunk-7RDEZ4SO.js";import"./chunk-NX4GBXD5.js";import"./chunk-WVPLSDAB.js";import{f as ae}from"./chunk-ZBNX2IFH.js";import"./chunk-UUCJONHT.js";import"./chunk-5XHTMESU.js";import{a as se}from"./chunk-4QKSUY3S.js";import{a as D,b as T,c as B,d as ue}from"./chunk-BAYC6XUE.js";import{a as y}from"./chunk-5EPWRUUJ.js";import"./chunk-OYZRTRNL.js";import{$a as ee,Ab as le,Ba as _,Ca as O,Da as I,E,Fa as Q,Ga as V,K as z,N as H,Na as W,O as s,Pa as X,Qa as Y,R as w,Za as Z,a as h,ab as te,b as U,ba as N,bb as oe,c as we,ca as a,fb as g,gb as re,ha as M,hb as R,ia as d,k,ka as x,m as c,n as S,oa as f,pa as u,qa as P,r as A,s as L,tb as b,ua as q,ub as j,va as C,wb as ie,xa as p,xb as ne,ya as $,za as J,zb as v}from"./chunk-2WJLTE3U.js";var n=re({source:"User Profile",events:{"Get user profile":g(),"Get user profile success":g(),"Get user profile failure":R(),"Follow user profile":g(),"Follow user profile success":g(),"Follow user profile failure":R()}});var ce={isLoading:!1,data:null,error:null},xe=ie({name:"userProfile",reducer:le(ce,v(n.getUserProfile,e=>U(h({},e),{isLoading:!0})),v(n.getUserProfileSuccess,(e,t)=>U(h({},e),{data:t.userProfile,isLoading:!1})),v(n.getUserProfileFailure,e=>U(h({},e),{isLoading:!1})),v(se,()=>ce))}),{name:pe,reducer:me,selectIsLoading:de,selectError:Pe,selectData:G}=xe;var m=(()=>{let t=class t{constructor(o){this.http=o}getUserProfile(o){let i=`${y.apiUrl}/profiles/${o}`;return this.http.get(i).pipe(c(l=>l.profile))}followUser(o){let i=`${y.apiUrl}/profiles/${o}/follow`;return this.http.post(i,{}).pipe(c(l=>l.profile))}unfollowUser(o){let i=`${y.apiUrl}/profiles/${o}/follow`;return this.http.delete(i).pipe(c(l=>l.profile))}};t.\u0275fac=function(i){return new(i||t)(H(Y))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();var ve=(()=>{let t=class t{constructor(){this.slug="",this.following=!1,this.store=s(b),this.servie=s(m)}follow(){this.following=!this.following,this.store.dispatch(n.followUserProfile({slug:this.slug,follow:this.following}))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=w({type:t,selectors:[["app-follow"]],inputs:{slug:"slug",following:"following"},standalone:!0,features:[_],decls:2,vars:1,consts:[["type","button","data-bs-toggle","button","aria-pressed","false","autocomplete","off",1,"btn","btn-outline-secondary","action-btn",3,"click"]],template:function(i,l){i&1&&(f(0,"button",0),q("click",function(){return l.follow()}),p(1),u()),i&2&&(a(),J(" ",l.following?"Unfollow":"Follow"," "))},encapsulation:2});let e=t;return e})();var Ce=e=>["/profiles",e],he=()=>({exact:!0}),_e=e=>["/profiles",e,"favorites"];function be(e,t){e&1&&(f(0,"button",7)(1,"a",15),P(2,"i",16),p(3,"Edit Profile Settings"),u()())}function ye(e,t){if(e&1&&P(0,"app-follow",8),e&2){let r,o=C(),i=C();d("slug",i.slug)("following",(r=o.userProfile==null?null:o.userProfile.following)!==null&&r!==void 0?r:!1)}}function Fe(e,t){if(e&1&&(f(0,"div",0)(1,"div",1)(2,"div",2),P(3,"img",3),f(4,"h4",4),p(5),u(),f(6,"p"),p(7),u()()(),f(8,"div",5)(9,"div",6),M(10,be,4,0,"button",7)(11,ye,1,2,"app-follow",8),u()()(),f(12,"div",9)(13,"div",5)(14,"div",10)(15,"ul",11)(16,"li",12)(17,"a",13),p(18," My Posts "),u()(),f(19,"li",12)(20,"a",13),p(21," Favorite Posts "),u()()()(),f(22,"div",10),P(23,"app-feed",14),u()()()),e&2){let r=t,o=C();a(3),d("src",r.userProfile==null?null:r.userProfile.image,N)("alt",r.userProfile==null?null:r.userProfile.username),a(2),$(r.userProfile==null?null:r.userProfile.username),a(2),$(r.userProfile==null?null:r.userProfile.bio),a(3),x(10,r.isCurrentUserProfile?10:-1),a(),x(11,r.isCurrentUserProfile?-1:11),a(6),d("routerLink",I(11,Ce,r.userProfile==null?null:r.userProfile.username))("routerLinkActiveOptions",O(13,he)),a(3),d("routerLink",I(14,_e,r.userProfile==null?null:r.userProfile.username))("routerLinkActiveOptions",O(16,he)),a(3),d("apiUrl",o.getApiUrl())}}var Ue=(()=>{let t=class t{constructor(){this.slug="",this.route=s(Z),this.router=s(ee),this.store=s(b),this.isCurrentUserProfile$=S({currentUser:this.store.pipe(j(ae),A(o=>o!==void 0)),userProfile:this.store.pipe(j(G),A(o=>!!o))}).pipe(c(({currentUser:o,userProfile:i})=>o?.username===i.username)),this.data$=S({isLoading:this.store.select(de),error:this.store.select(Pe),userProfile:this.store.select(G),isCurrentUserProfile:this.isCurrentUserProfile$})}ngOnInit(){this.route.params.subscribe(o=>{this.slug=o.slug,this.fectUserProfile(),this.getApiUrl()})}fectUserProfile(){this.store.dispatch(n.getUserProfile({slug:this.slug}))}getApiUrl(){return this.router.url.includes("favorites")?`/articles?favorited=${this.slug}`:`/articles?author=${this.slug}`}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=w({type:t,selectors:[["app-user-profile"]],standalone:!0,features:[_],decls:2,vars:3,consts:[[1,"container","mt-3"],[1,"row","justify-content-center"],[1,"col-xl-6","col-md-6","text-center"],[1,"rounded","mx-auto","d-block",3,"src","alt"],[1,"mt-3"],[1,"row"],[1,"col-3","col-sm-3","col-md-3","mx-auto","px-5"],["type","button","data-bs-toggle","button","aria-pressed","false","autocomplete","off",1,"btn","btn-outline-secondary","action-btn"],[3,"slug","following"],[1,"container"],[1,"col-xl-12","col-md-12"],[1,"nav","nav-underline"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],[3,"apiUrl"],["routerLink","/settings","routerLinkActive","router-link-active",1,"nav-link"],[1,"bi","bi-gear-fill","ms-1"]],template:function(i,l){if(i&1&&(M(0,Fe,24,17),Q(1,"async")),i&2){let F;x(0,(F=V(1,1,l.data$))?0:-1,F)}},dependencies:[X,W,te,oe,fe,ve],styles:[".nav-pills[_ngcontent-%COMP%]{gap:2rem}.nav-pills[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.nav-link[_ngcontent-%COMP%]{color:#000;font-weight:500}.active[_ngcontent-%COMP%], .nav-underline[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#8e3d8f!important}.action-btn[_ngcontent-%COMP%]:hover{color:#fff}"]});let e=t;return e})();var K={};we(K,{followUserProfileEffects:()=>Se,getUserProfileEffects:()=>ke});var ke=D((e=s(T),t=s(m))=>e.pipe(B(n.getUserProfile),E(({slug:r})=>t.getUserProfile(r).pipe(c(o=>n.getUserProfileSuccess({userProfile:o})),L(()=>k(n.getUserProfileFailure()))))),{functional:!0}),Se=D((e=s(T),t=s(m))=>e.pipe(B(n.followUserProfile),E(({slug:r,follow:o})=>(o?t.followUser(r):t.unfollowUser(r)).pipe(c(l=>n.followUserProfileSuccess({userProfile:l})),L(()=>k(n.followUserProfileFailure()))))),{functional:!0});var gt=[{path:"",component:Ue,providers:[m,ne(pe,me),ue(K)]}];export{gt as userProfilesRoutes};
