import{a as nt}from"./chunk-5X4NABJI.js";import"./chunk-6YVOLU4S.js";import"./chunk-UUCJONHT.js";import{a as st}from"./chunk-JPC3327C.js";import{a as ot}from"./chunk-5XHTMESU.js";import{a as rt}from"./chunk-4QKSUY3S.js";import{a as g,b as h,c as v,d as at}from"./chunk-BAYC6XUE.js";import{a as ct}from"./chunk-5EPWRUUJ.js";import"./chunk-OYZRTRNL.js";import{$a as Q,Ab as it,Ba as O,E as C,Fa as q,G as w,Ga as B,K as j,N as M,Na as H,O as m,Pa as N,Qa as z,R,X as T,Y as U,Za as J,a as s,b as l,c as ht,ca as f,da as _,fb as d,gb as W,ha as y,hb as X,ia as $,k as b,ka as x,m as p,n as V,oa as A,pa as L,qa as k,r as I,s as E,ta as G,tb as Y,ua as P,ub as Z,va as D,wb as tt,xa as K,xb as et,zb as a}from"./chunk-2WJLTE3U.js";var r=W({source:"editArticles",events:{"Get article":d(),"Get article success":d(),"Get article failure":X(),"Update article":d(),"Update article success":d(),"Update article failure":d()}});var lt={article:null,isLoading:!1,isSubmitted:!1,validationErrors:null},vt=tt({name:"editArticle",reducer:it(lt,a(r.getArticle,t=>l(s({},t),{isLoading:!0})),a(r.getArticleSuccess,(t,e)=>l(s({},t),{isLoading:!1,article:e.article})),a(r.getArticleFailure,(t,e)=>l(s({},t),{isSubmitted:!1})),a(r.updateArticle,t=>l(s({},t),{isLoading:!0})),a(r.updateArticleSuccess,t=>l(s({},t),{isLoading:!1})),a(r.updateArticleFailure,(t,e)=>l(s({},t),{isSubmitted:!1,validationErrors:e.errors})),a(rt,()=>lt))}),{name:pt,reducer:mt,selectIsSubmitted:dt,selectValidationErrors:ut,selectIsLoading:ft,selectArticle:At}=vt;function bt(t,e){t&1&&k(0,"app-loading")}function Et(t,e){if(t&1){let n=G();A(0,"div",1)(1,"div",2)(2,"div",3),y(3,bt,1,0,"app-loading"),A(4,"app-article-form",4),P("articleSubmit",function(i){T(n);let c=D();return U(c.onSubmit(i))}),L()()()()}if(t&2){let n=e;f(3),x(3,n.isLoading?3:-1),f(),$("initialValue",n.initialVlaues)("isSubmitting",!1)("errors",n.backendErrors)}}var gt=(()=>{let e=class e{constructor(o,i){this.store=o,this.route=i,this.slug=this.route.snapshot.paramMap.get("slug")??"",this.initialVlaues$=this.store.pipe(Z(At),I(c=>c!=null),p(c=>({title:c.title,description:c.description,body:c.body,tagList:c.tagList}))),this.data$=V({isSubmitted:this.store.select(dt),backendErrors:this.store.select(ut),isLoading:this.store.select(ft),initialVlaues:this.initialVlaues$})}ngOnInit(){this.store.dispatch(r.getArticle({slug:this.slug}))}onSubmit(o){let i={article:o};this.store.dispatch(r.updateArticle({request:i,slug:this.slug}))}};e.\u0275fac=function(i){return new(i||e)(_(Y),_(J))},e.\u0275cmp=R({type:e,selectors:[["app-edit-article"]],standalone:!0,features:[O],decls:6,vars:3,consts:[[1,"banner"],[1,"container"],[1,"row","mt-5"],[1,"col-12"],[3,"articleSubmit","initialValue","isSubmitting","errors"]],template:function(i,c){if(i&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),K(3,"Edit Article"),L()()(),y(4,Et,5,4,"div",1),q(5,"async")),i&2){let u;f(4),x(4,(u=B(5,1,c.data$))?4:-1,u)}},dependencies:[nt,N,H,ot],styles:[".banner[_ngcontent-%COMP%]{color:#fff;background:#333;padding:2rem 0;margin-bottom:2rem}"]});let t=e;return t})();var S=(()=>{let e=class e{constructor(o){this.http=o}updateArticle(o,i){let c=ct.apiUrl+`/articles/${o}`;return this.http.put(c,i).pipe(p(u=>u.article))}};e.\u0275fac=function(i){return new(i||e)(M(z))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();var F={};ht(F,{getArticleEffect:()=>Ct,redirectAfterEditEffect:()=>yt,updateArticleEffect:()=>_t});var Ct=g((t=m(h),e=m(st))=>t.pipe(v(r.getArticle),C(({slug:n})=>e.getArticles(n).pipe(p(o=>r.getArticleSuccess({article:o})),E(o=>b(r.getArticleFailure()))))),{functional:!0}),_t=g((t=m(h),e=m(S))=>t.pipe(v(r.updateArticle),C(({request:n,slug:o})=>e.updateArticle(o,n).pipe(p(i=>r.updateArticleSuccess({article:i})),E(i=>b(r.updateArticleFailure({errors:i.error.errors})))))),{functional:!0}),yt=g((t=m(h),e=m(Q))=>t.pipe(v(r.updateArticleSuccess),w(({article:n})=>{e.navigate(["/article",n.slug])})),{functional:!0,dispatch:!1});var ce=[{path:"",component:gt,providers:[S,at(F),et(pt,mt)]}];export{ce as editArticleRoutes};
