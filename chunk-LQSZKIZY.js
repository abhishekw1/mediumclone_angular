import{a as pe,b as fe}from"./chunk-WVPLSDAB.js";import{f as me}from"./chunk-ZBNX2IFH.js";import{a as _e}from"./chunk-JPC3327C.js";import{a as de}from"./chunk-5XHTMESU.js";import{a as se}from"./chunk-4QKSUY3S.js";import{a as E,b as P,c as O,d as ge}from"./chunk-BAYC6XUE.js";import{a as ue}from"./chunk-5EPWRUUJ.js";import"./chunk-OYZRTRNL.js";import{$a as ie,Ab as le,Ba as W,Da as D,E as k,Fa as R,G as z,Ga as j,K as B,N as V,Na as X,O as p,Oa as Y,Pa as Z,Qa as ee,R as K,X as q,Y as H,Za as te,a as v,ab as re,b as x,ba as N,c as ye,ca as o,da as T,fb as M,gb as ne,ha as A,hb as S,ia as _,k as F,ka as u,m as g,n as I,oa as c,pa as l,qa as s,r as G,s as w,ta as J,tb as oe,ua as Q,va as C,wb as ae,xa as m,xb as ce,ya as b,za as y,zb as h}from"./chunk-2WJLTE3U.js";var n=ne({source:"article",events:{"Get article":M(),"Get article success":M(),"Get article failure":S(),"Delete article":M(),"Delete article success":S(),"Delete article failure":S()}});var Ce={isLoading:!1,article:void 0,error:null},Me=ae({name:"article",reducer:le(Ce,h(n.getArticle,e=>x(v({},e),{isLoading:!0})),h(n.getArticleSuccess,(e,t)=>x(v({},e),{article:t.article,isLoading:!1})),h(n.getArticleFailure,e=>x(v({},e),{isLoading:!1})),h(se,()=>Ce))}),{name:he,reducer:ve,selectIsLoading:xe,selectArticle:U,selectError:Ae}=Me;var Ee=e=>["/profiles",e],Pe=e=>["/article",e,"edit"];function Oe(e,t){e&1&&s(0,"app-loading")}function Le(e,t){if(e&1){let i=J();c(0,"li",17)(1,"a",18),s(2,"i",19),m(3," Edit "),l()(),c(4,"li",20),Q("click",function(){q(i);let a=C(3);return H(a.deleteArticle())}),c(5,"a",21),s(6,"i",22),m(7," Delete"),l()()}if(e&2){let i=C();_("routerLink",D(1,Pe,i.slug))}}function Fe(e,t){if(e&1&&(c(0,"li",23)(1,"a",18),s(2,"i",24),m(3),l()(),c(4,"li",23)(5,"a",25),s(6,"i",26),m(7),l()()),e&2){let i=C();o(3),y("Follow ",i.author.username," "),o(4),y(" Favorite Article ",i.favoritesCount,"")}}function Ie(e,t){if(e&1&&(c(0,"div",0)(1,"div",1)(2,"h1"),m(3),l(),c(4,"div",2)(5,"div",3)(6,"div",4)(7,"h5",5),s(8,"img",6),c(9,"div",7)(10,"a",8),m(11),l(),c(12,"small",9),m(13),R(14,"date"),l()()()(),c(15,"div",10)(16,"ul",11),A(17,Le,8,3)(18,Fe,8,2),l()()()()()(),c(19,"div",1)(20,"div",12)(21,"div",13)(22,"p",14),m(23),l(),s(24,"app-tag-list",15)(25,"hr",16),l()()()),e&2){let i=t,r=C();o(3),b(i==null?null:i.title),o(5),_("src",i.author.image,N)("alt",i.author.username),o(2),_("routerLink",D(11,Ee,i.author.username)),o(),y("",i.author.username," "),o(2),b(j(14,9,i.createdAt)),o(4),u(17,r.isAuther?17:18),o(6),b(i.body),o(),_("tags",i.tagList)}}function we(e,t){e&1&&s(0,"app-error-message")}function ke(e,t){if(e&1&&A(0,Oe,1,0,"app-loading")(1,Ie,26,13)(2,we,1,0,"app-error-message"),e&2){let i,r=t;u(0,r.isLoading?0:-1),o(),u(1,(i=r.article)?1:-1,i),o(),u(2,r.error?2:-1)}}var be=(()=>{let t=class t{constructor(r,a){this.store=r,this.route=a,this.isAuther$=I({article:this.store.select(U),currentUser:this.store.select(me).pipe(G(d=>d!==void 0))}).pipe(g(({article:d,currentUser:f})=>!d||!f?!1:d.author.username===f.username)),this.data$=I({isLoading:this.store.select(xe),article:this.store.select(U),error:this.store.select(Ae),isAuther:this.isAuther$}),this.slug=""}ngOnInit(){this.route.params.subscribe(r=>{this.slug=r.slug,this.store.dispatch(n.getArticle({slug:this.slug}))})}deleteArticle(){this.store.dispatch(n.deleteArticle({slug:this.slug}))}};t.\u0275fac=function(a){return new(a||t)(T(oe),T(te))},t.\u0275cmp=K({type:t,selectors:[["app-article"]],standalone:!0,features:[W],decls:2,vars:3,consts:[[1,"banner"],[1,"container"],[1,"article-actions","mt-5"],[1,"row","article-meta","align-items-center"],[1,"col-md-4"],[1,"d-flex","gap-2","align-items-center","mb-0"],[1,"img-fluid",3,"src","alt"],[1,"d-flex","flex-column"],[1,"username",3,"routerLink"],[1,"text-muted"],[1,"col-md-8"],[1,"list","ps-0","d-flex","flex-wrap","mb-0","float-end"],[1,"row"],[1,"col-md-12"],[1,"article-body"],[3,"tags"],[1,"my-3"],[1,"list-inline-item",3,"routerLink"],[1,"btn","btn-outline-secondary","btn-sm"],[1,"bi","bi-pencil-square"],[1,"list-inline-item",3,"click"],[1,"btn","btn-outline-secondary","btn-sm","del-article"],[1,"bi","bi-trash-fill"],[1,"list-inline-item"],[1,"bi","bi-plus"],[1,"btn","btn-outline-secondary","btn-sm","fav-atricle"],[1,"bi","bi-heart-fill"]],template:function(a,d){if(a&1&&(A(0,ke,3,3),R(1,"async")),a&2){let f;u(0,(f=j(1,1,d.data$))?0:-1,f)}},dependencies:[Z,X,Y,re,fe,pe,de],styles:[".banner[_ngcontent-%COMP%]{color:#fff;background:#333;padding:2rem 0;margin-bottom:2rem}.article-meta[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.article-meta[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-size:1rem}.article-meta[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:#fff!important;font-size:.75rem;font-weight:300}.article-meta[_ngcontent-%COMP%]   .fav-atricle[_ngcontent-%COMP%]{color:#5cb85c;border-color:#5cb85c}.article-meta[_ngcontent-%COMP%]   .fav-atricle[_ngcontent-%COMP%]:hover{color:#fff;background-color:#5cb85c}.article-meta[_ngcontent-%COMP%]   .del-article[_ngcontent-%COMP%]{color:#b85c5c;border-color:#b85c5c}.article-meta[_ngcontent-%COMP%]   .del-article[_ngcontent-%COMP%]:hover{color:#fff;background-color:#b85c5c}@media screen and (max-width: 554px){.article-meta[_ngcontent-%COMP%]{gap:1rem}}.img-fluid[_ngcontent-%COMP%]{width:32px;height:32px}"]});let e=t;return e})();var $={};ye($,{articleEffect:()=>Te,deleteArticleEffect:()=>De,redirectAfterDeleteEffect:()=>Re});var L=(()=>{let t=class t{constructor(r){this.http=r}deleteArticles(r){let a=ue.apiUrl+`/articles/${r}`;return this.http.delete(a)}};t.\u0275fac=function(a){return new(a||t)(V(ee))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Te=E((e=p(P),t=p(_e))=>e.pipe(O(n.getArticle),k(({slug:i})=>t.getArticles(i).pipe(g(r=>n.getArticleSuccess({article:r})),w(r=>F(n.getArticleFailure()))))),{functional:!0}),De=E((e=p(P),t=p(L))=>e.pipe(O(n.deleteArticle),k(({slug:i})=>t.deleteArticles(i).pipe(g(()=>n.deleteArticleSuccess()),w(r=>F(n.deleteArticleFailure()))))),{functional:!0}),Re=E((e=p(P),t=p(ie))=>e.pipe(O(n.deleteArticleSuccess),z(()=>{t.navigateByUrl("/")})),{functional:!0,dispatch:!1});var ht=[{path:"",component:be,providers:[ce(he,ve),ge($),L]}];export{ht as articleRoutes};
