import{a as Z}from"./chunk-5X4NABJI.js";import"./chunk-6YVOLU4S.js";import"./chunk-UUCJONHT.js";import{a as v,b as C,c as h,d as ee}from"./chunk-BAYC6XUE.js";import{a as Y}from"./chunk-5EPWRUUJ.js";import"./chunk-OYZRTRNL.js";import{$a as O,Ab as X,Ba as $,E as F,Fa as q,G as V,Ga as B,K as w,N as j,Na as G,O as n,Pa as H,Qa as N,R as I,X as M,Y as R,a as s,b as l,c as ae,ca as d,da as k,fb as p,gb as z,ha as T,ia as D,k as y,ka as K,m,n as g,oa as A,pa as b,s as _,ta as L,tb as J,ua as P,va as S,wb as Q,xa as U,xb as W,zb as f}from"./chunk-2WJLTE3U.js";var o=z({source:"createArticles",events:{"Create articles":p(),"Create articles success":p(),"Create articles failure":p()}});var ne={isSubmitted:!1,validationErrors:null},se=Q({name:"createArticle",reducer:X(ne,f(o.createArticles,t=>l(s({},t),{isSubmitted:!0})),f(o.createArticlesSuccess,t=>l(s({},t),{isSubmitted:!1})),f(o.createArticlesFailure,(t,e)=>l(s({},t),{validationErrors:e.errors,isSubmitted:!1})))}),{name:te,reducer:re,selectIsSubmitted:ie,selectValidationErrors:oe}=se;function me(t,e){if(t&1){let c=L();A(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-article-form",4),P("articleSubmit",function(i){M(c);let a=S();return R(a.onSubmit(i))}),b()()()()}if(t&2){let c=S();d(3),D("initialValue",c.initialVlaues)("isSubmitting",!1)("errors",e.backendErrors)}}var ce=(()=>{let e=class e{constructor(r){this.store=r,this.initialVlaues={title:"",description:"",body:"",tagList:[]},this.data$=g({isSubmitted:this.store.select(ie),backendErrors:this.store.select(oe)})}onSubmit(r){let i={article:r};this.store.dispatch(o.createArticles({request:i}))}};e.\u0275fac=function(i){return new(i||e)(k(J))},e.\u0275cmp=I({type:e,selectors:[["app-create-article"]],standalone:!0,features:[$],decls:6,vars:3,consts:[[1,"banner"],[1,"container"],[1,"row","mt-5"],[1,"col-12"],[3,"articleSubmit","initialValue","isSubmitting","errors"]],template:function(i,a){if(i&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),U(3,"New Article"),b()()(),T(4,me,4,3,"div",1),q(5,"async")),i&2){let E;d(4),K(4,(E=B(5,1,a.data$))?4:-1,E)}},dependencies:[Z,H,G],styles:[".banner[_ngcontent-%COMP%]{color:#fff;background:#333;padding:2rem;margin-bottom:2rem}"]});let t=e;return t})();var u=(()=>{let e=class e{constructor(r){this.http=r}createArticle(r){let i=Y.apiUrl+"/articles";return this.http.post(i,r).pipe(m(a=>a.article))}};e.\u0275fac=function(i){return new(i||e)(j(N))},e.\u0275prov=w({token:e,factory:e.\u0275fac});let t=e;return t})();var x={};ae(x,{createArticleEffect:()=>pe,redirectAfterCreateEffect:()=>fe});var pe=v((t=n(C),e=n(u))=>t.pipe(h(o.createArticles),F(({request:c})=>e.createArticle(c).pipe(m(r=>o.createArticlesSuccess({article:r})),_(r=>y(o.createArticlesFailure({errors:r.error.errors})))))),{functional:!0}),fe=v((t=n(C),e=n(O))=>t.pipe(h(o.createArticlesSuccess),V(({article:c})=>{e.navigate(["/article",c.slug])})),{functional:!0,dispatch:!1});var Be=[{path:"",component:ce,providers:[u,ee(x),W(te,re)]}];export{Be as createArticleRoutes};
